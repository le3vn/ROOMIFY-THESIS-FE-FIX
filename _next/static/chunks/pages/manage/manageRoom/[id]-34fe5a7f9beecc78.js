(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[312],{7838:function(e,l,t){"use strict";t.d(l,{Z:function(){return a}});var s=t(7294);function a(){let[,e]=s.useReducer(e=>e+1,0);return e}},9086:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage/manageRoom/[id]",function(){return t(8640)}])},9198:function(e,l,t){"use strict";var s=t(5893);t(7294);let a=e=>{let{visible:l,onConfirm:t,onCancel:a}=e;return(0,s.jsxs)("div",{className:"fixed inset-0 flex flex-col justify-center items-center bg-black bg-opacity-50 z-auto ".concat(l?"":"hidden"),children:[(0,s.jsx)("div",{className:"bg-purple-950 p-4 absolute top-32 rounded-full border-white border-4",children:(0,s.jsx)("img",{src:"/Assets/images/are-you-sure.png",alt:"Are you sure?",className:"w-[200px] rounded-full"})}),(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg w-2/5 h-2/5",children:(0,s.jsxs)("div",{className:"h-full",children:[(0,s.jsx)("div",{className:"h-2/3 flex flex-col justify-end",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Are you sure you want to edit the room?"}),(0,s.jsx)("h4",{className:"text-center",children:"Please make sure the information is correct before proceeding."})]})}),(0,s.jsx)("div",{className:"h-1/3 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{className:"bg-purple-950 h-[50px] w-[150px] rounded-full text-white text-lg font-semibold",onClick:t,children:"Yes, Edit"}),(0,s.jsx)("button",{className:"bg-gray-200 h-[50px] w-[150px] rounded-full text-black text-lg font-semibold",onClick:a,children:"Cancel"})]})})]})})]})};l.Z=a},4339:function(e,l,t){"use strict";var s=t(5893);t(7294);let a=e=>{let{visible:l,onConfirm:t,isSuccess:a,onCancel:i}=e;return(0,s.jsxs)("div",{className:"fixed inset-0 flex flex-col justify-center items-center bg-black bg-opacity-50 z-auto ".concat(l?"":"hidden"),children:[(0,s.jsx)("div",{className:"bg-purple-950 p-4 absolute top-32 rounded-full border-white border-4",children:(0,s.jsx)("img",{src:a?"/Assets/images/succeed.png":"/Assets/images/person-sad.png",alt:"Success or Error",className:"w-[200px] rounded-full"})}),(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg w-2/5 h-2/5",children:(0,s.jsxs)("div",{className:"h-full",children:[(0,s.jsx)("div",{className:"h-2/3 flex flex-col justify-end",children:a?(0,s.jsxs)("div",{className:"flex flex-col items-center px-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"You're All Set!"}),(0,s.jsx)("h4",{className:"text-center",children:"Your room has been successfully updated. Check your building list for the changes!"})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Oh no..."}),(0,s.jsx)("h4",{className:"text-center",children:"Something went wrong. Please try again later."})]})}),(0,s.jsx)("div",{className:"h-1/3 flex items-center justify-center",children:(0,s.jsx)("div",{className:"flex gap-4",children:(0,s.jsx)("button",{className:"bg-purple-950 h-[50px] w-[150px] rounded-full text-white text-lg font-semibold",onClick:a?t:i,children:a?"Okay, Great!":"Try Again"})})})]})})]})};l.Z=a},8640:function(e,l,t){"use strict";t.r(l);var s=t(5893),a=t(7294),i=t(1163),n=t(2453),r=t(6738),o=t(6985),c=t(1693),d=t(8662),m=t(7814),u=t(9417),x=t(7536),p=t(1061),h=t(6551),b=t(3939),f=t(9734),g=t(161),j=t(4339),N=t(9198);let y=["image/jpeg","image/png","image/gif"],v=()=>{let e=(0,i.useRouter)(),{id:l}=e.query,{fetchPOSTWithFormData:t}=(0,h.L)(),g=(0,b.f)(),{data:v}=(0,f.ZP)("".concat(p.j.getAllRoomDetail,"?id=").concat(l),g),{data:w}=(0,f.ZP)(p.j.getBuilding,g),{data:R}=(0,f.ZP)(p.j.getRoomGroup,g),{handleSubmit:k,control:C,setValue:P,reset:I}=(0,x.cI)(),[S,G]=(0,a.useState)(null),[Z,A]=(0,a.useState)(""),[B,D]=(0,a.useState)(!1),[E,_]=(0,a.useState)(!1),[F,T]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(v){var e;I({RoomName:v.name,Description:v.description,RoomTypeId:v.roomTypeId,BuildingId:v.buildingId,Capacity:v.capacity,RoomGroupId:v.roomGroupId}),G(v.minioUrl);let l=decodeURIComponent((null===(e=v.minioUrl.split("/").pop())||void 0===e?void 0:e.split("?")[0])||"");A(l)}},[v,I]);let U=e=>{let l={};return e.RoomName&&0!==e.RoomName.trim().length||(l.RoomName="Nama Kosong"),e.Description&&e.Description.length>250&&(l.Description="Deskripsi maksimal 250 karakter"),e.RoomPicture&&!y.includes(e.RoomPicture.type)&&(l.RoomPicture="File yang di upload hanya bisa dalam format JPG, JPEG, PNG"),e.RoomPicture&&e.RoomPicture.size>5242880&&(l.RoomPicture="File yang di upload maksimal 5 MB"),(!e.Capacity||isNaN(e.Capacity))&&(l.Capacity="Capacity harus berupa angka"),l},L=async e=>{let s=U(e);if(Object.keys(s).length>0){for(let e in s)n.ZP.error(s[e]);return}let a=new FormData;a.append("Name",e.RoomName),a.append("Description",e.Description),a.append("RoomTypeId",e.RoomTypeId.toString()),a.append("BuildingId",e.BuildingId.toString()),a.append("Capacity",e.Capacity.toString()),a.append("RoomGroupId",e.RoomGroupId.toString()),e.RoomPicture&&a.append("RoomPicture",e.RoomPicture);try{await t(p.j.editRoom(l),a),T(!0),_(!0)}catch(e){T(!1),_(!0),console.error("Update failed:",e)}},O=e=>{if(!y.includes(e.type))return n.ZP.error("File yang di upload hanya bisa dalam format JPG, JPEG, PNG"),!1;if(e.size>5242880)return n.ZP.error("File yang di upload maksimal 5 MB"),!1;let l=new FileReader;return l.readAsDataURL(e),l.onload=()=>{G(l.result),A(e.name),P("RoomPicture",e)},!1},Q=()=>{G(null),A(""),P("RoomPicture",null)},z=()=>{e.back()},J=()=>{D(!1)},Y=()=>{D(!1),k(L)()},M=()=>{_(!1),e.push("/manage")};return(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("button",{className:"bg-white rounded-full w-10 h-10 flex items-center justify-center",onClick:z,children:(0,s.jsx)(m.G,{icon:u.A35,className:"inline"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("img",{src:"/Assets/images/edit-room.png",alt:"manage",width:310,height:40,className:"mt-6 mb-6"}),(0,s.jsxs)("form",{onSubmit:k(L),className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-white font-normal text-base mb-2",children:"Building Name"}),(0,s.jsx)(x.Qr,{name:"RoomName",control:C,render:e=>{let{field:l}=e;return(0,s.jsx)(r.Z,{...l,placeholder:"Enter building name",className:"w-full mb-3 rounded-lg h-8"})}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-white font-normal text-base mb-2",children:"Description"}),(0,s.jsx)(x.Qr,{name:"Description",control:C,render:e=>{let{field:l}=e;return(0,s.jsx)("textarea",{...l,className:"bg-white"})}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-white font-normal text-base mb-2",children:"Room Type"}),(0,s.jsx)(x.Qr,{name:"RoomTypeId",control:C,render:e=>{let{field:l}=e;return(0,s.jsx)(o.Z,{...l,placeholder:"Select room type",className:"w-full mb-3 rounded-lg h-8",options:[{value:1,label:"LAB"},{value:2,label:"CLASS"},{value:3,label:"FUNCTION"}]})}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-white font-normal text-base mb-2",children:"Building"}),(0,s.jsx)(x.Qr,{name:"BuildingId",control:C,render:e=>{let{field:l}=e;return(0,s.jsx)(o.Z,{...l,placeholder:"Select building",className:"w-full mb-3 rounded-lg h-8",options:null==w?void 0:w.buildingList.map(e=>({value:e.buildingId,label:e.name}))})}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-white font-normal text-base mb-2",children:"Capacity"}),(0,s.jsx)(x.Qr,{name:"Capacity",control:C,render:e=>{let{field:l}=e;return(0,s.jsx)(r.Z,{...l,placeholder:"Enter capacity",className:"w-full mb-3 rounded-lg h-8"})}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-white font-normal text-base mb-2",children:"Room Group"}),(0,s.jsx)(x.Qr,{name:"RoomGroupId",control:C,render:e=>{let{field:l}=e;return(0,s.jsx)(o.Z,{...l,placeholder:"Select room group",className:"w-full mb-3 rounded-lg h-8",options:null==R?void 0:R.roomGroups.map(e=>({value:e.id,label:e.name}))})}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-white font-normal text-base mb-2",children:"Building Image"}),(0,s.jsx)(c.Z,{beforeUpload:O,showUploadList:!1,children:(0,s.jsxs)(d.ZP,{className:"bg-white border-black text-black text-base",children:[(0,s.jsx)(m.G,{icon:u.cf$,className:"mr-2"}),"Click to Upload"]})})]}),S&&(0,s.jsx)("div",{className:"relative w-full flex justify-center bg-[#F4F5F2] rounded-md p-5",children:(0,s.jsxs)("div",{className:"w-[256px] h-[150px] relative overflow-hidden rounded-md",children:[(0,s.jsx)("img",{src:S,alt:Z,className:"object-cover w-full h-full"}),(0,s.jsx)("button",{className:"absolute top-0 right-0 text-red-600 rounded-full p-2",onClick:Q,children:(0,s.jsx)(m.G,{icon:u.NBC})})]})}),(0,s.jsx)("div",{className:"flex justify-center mt-6",children:(0,s.jsx)("button",{type:"button",className:"bg-purple-950 px-14 py-2 font-bold text-white rounded-full text-xl",onClick:()=>D(!0),children:"Save Changes"})})]})]}),(0,s.jsx)(N.Z,{visible:B,onConfirm:Y,onCancel:J}),(0,s.jsx)(j.Z,{visible:E,onConfirm:M,isSuccess:F,onCancel:M})]})};v.layout=g.f,l.default=v}},function(e){e.O(0,[976,634,738,397,453,693,536,161,774,888,179],function(){return e(e.s=9086)}),_N_E=e.O()}]);
//# sourceMappingURL=[id]-34fe5a7f9beecc78.js.map
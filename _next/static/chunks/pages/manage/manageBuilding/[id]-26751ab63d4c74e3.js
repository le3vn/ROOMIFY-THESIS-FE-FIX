(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[286],{3606:function(e,l,s){"use strict";s.d(l,{Z:function(){return c}});var t=s(1413),i=s(7294),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},a=s(2135),r=function(e,l){return i.createElement(a.Z,(0,t.Z)((0,t.Z)({},e),{},{ref:l,icon:n}))};r.displayName="CheckOutlined";var c=i.forwardRef(r)},7838:function(e,l,s){"use strict";s.d(l,{Z:function(){return i}});var t=s(7294);function i(){let[,e]=t.useReducer(e=>e+1,0);return e}},110:function(e,l,s){"use strict";var t=s(7294),i=s(6745),n=s(4457);let a=(e,l)=>{let s=t.useContext(i.Z),a=t.useMemo(()=>{var t;let i=l||n.Z[e],a=null!==(t=null==s?void 0:s[e])&&void 0!==t?t:{};return Object.assign(Object.assign({},"function"==typeof i?i():i),a||{})},[e,l,s]),r=t.useMemo(()=>{let e=null==s?void 0:s.locale;return(null==s?void 0:s.exist)&&!e?n.Z.locale:e},[s]);return[a,r]};l.Z=a},1793:function(e,l,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage/manageBuilding/[id]",function(){return s(6237)}])},6237:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return P}});var t=s(5893),i=s(7294),n=s(1163),a=s(2453),r=s(6738),c=s(1693),d=s(8662),u=s(7814),o=s(9417),m=s(7536),x=s(6312),h=s(1604),f=s(1061),g=s(6551),b=s(3939),p=s(9734);let j=e=>{let{visible:l,onConfirm:s,onCancel:i}=e;return(0,t.jsxs)("div",{className:"fixed inset-0 flex flex-col justify-center items-center bg-black bg-opacity-50 z-auto ".concat(l?"":"hidden"),children:[(0,t.jsx)("div",{className:"bg-purple-950 p-4 absolute top-32 rounded-full border-white border-4",children:(0,t.jsx)("img",{src:"/Assets/images/are-you-sure.png",alt:"Are you sure?",className:"w-[200px] rounded-full"})}),(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg w-2/5 h-2/5",children:(0,t.jsxs)("div",{className:"h-full",children:[(0,t.jsx)("div",{className:"h-2/3 flex flex-col justify-end",children:(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Are you sure you want to edit the building?"}),(0,t.jsx)("h4",{className:"text-center",children:"Please make sure the information is correct before proceeding."})]})}),(0,t.jsx)("div",{className:"h-1/3 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{className:"bg-purple-950 h-[50px] w-[150px] rounded-full text-white text-lg font-semibold",onClick:s,children:"Yes, Edit"}),(0,t.jsx)("button",{className:"bg-gray-200 h-[50px] w-[150px] rounded-full text-black text-lg font-semibold",onClick:i,children:"Cancel"})]})})]})})]})},N=e=>{let{visible:l,onConfirm:s,isSuccess:i,onCancel:n}=e;return(0,t.jsxs)("div",{className:"fixed inset-0 flex flex-col justify-center items-center bg-black bg-opacity-50 z-auto ".concat(l?"":"hidden"),children:[(0,t.jsx)("div",{className:"bg-purple-950 p-4 absolute top-32 rounded-full border-white border-4",children:(0,t.jsx)("img",{src:i?"/Assets/images/succeed.png":"/Assets/images/person-sad.png",alt:"Success or Error",className:"w-[200px] rounded-full"})}),(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg w-2/5 h-2/5",children:(0,t.jsxs)("div",{className:"h-full",children:[(0,t.jsx)("div",{className:"h-2/3 flex flex-col justify-end",children:i?(0,t.jsxs)("div",{className:"flex flex-col items-center px-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"You're All Set!"}),(0,t.jsx)("h4",{className:"text-center",children:"Your building has been successfully updated. Check your building list for the changes!"})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Oh no..."}),(0,t.jsx)("h4",{className:"text-center",children:"Something went wrong. Please try again later."})]})}),(0,t.jsx)("div",{className:"h-1/3 flex items-center justify-center",children:(0,t.jsx)("div",{className:"flex gap-4",children:(0,t.jsx)("button",{className:"bg-purple-950 h-[50px] w-[150px] rounded-full text-white text-lg font-semibold",onClick:i?s:n,children:i?"Okay, Great!":"Try Again"})})})]})})]})};var v=s(161);let w=["image/jpeg","image/png","image/gif"],y=h.z.object({Name:h.z.string().min(1,"Nama Kosong"),BuildingPicture:h.z.any().nullable().refine(e=>null===e||e.size<=5242880,"File yang di upload maksimal 5 MB").refine(e=>null===e||w.includes(e.type),"File yang di upload hanya bisa dalam format JPG, JPEG, PNG")}),k=()=>{let e=(0,n.useRouter)(),{id:l}=e.query,{fetchPOSTWithFormData:s}=(0,g.L)(),h=(0,b.f)(),{data:v}=(0,p.ZP)(l?f.j.getBuildingDetail(l):null,h,{revalidateOnFocus:!1,revalidateOnReconnect:!1}),{handleSubmit:k,control:P,setValue:C,reset:B}=(0,m.cI)({resolver:(0,x.F)(y)}),[Z,E]=(0,i.useState)(null),[_,F]=(0,i.useState)(""),[S,A]=(0,i.useState)(!1),[G,O]=(0,i.useState)(!1),[z,U]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(v){var e;B({Name:v.name,BuildingPicture:null}),E(v.minioUrl);let l=decodeURIComponent((null===(e=v.minioUrl.split("/").pop())||void 0===e?void 0:e.split("?")[0])||"");F(l)}},[v,B]);let R=async e=>{let t=new FormData;t.append("Name",e.Name),e.BuildingPicture&&t.append("BuildingPicture",e.BuildingPicture);try{await s(f.j.editBuilding(l),t),U(!0),O(!0)}catch(e){U(!1),O(!0),console.error("Update failed:",e)}},M=e=>{if(!w.includes(e.type))return a.ZP.error("File yang di upload hanya bisa dalam format JPG, JPEG, PNG"),!1;if(e.size>5242880)return a.ZP.error("File yang di upload maksimal 5 MB"),!1;let l=new FileReader;return l.readAsDataURL(e),l.onload=()=>{E(l.result),F(e.name),C("BuildingPicture",e,{shouldValidate:!0})},!1},J=()=>{E(null),F(""),C("BuildingPicture",null,{shouldValidate:!0})},L=()=>{e.back()},D=()=>{A(!1)},I=()=>{A(!1),k(R)()},T=()=>{O(!1),e.push("/manage")};return(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("button",{className:"bg-white rounded-full w-10 h-10 flex items-center justify-center",onClick:L,children:(0,t.jsx)(u.G,{icon:o.A35,className:"inline"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("img",{src:"/Assets/images/edit-building.png",alt:"manage",width:310,height:40,className:"mt-6 mb-6"}),(0,t.jsxs)("form",{onSubmit:k(R),className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-white font-normal text-base mb-2",children:"Building Name"}),(0,t.jsx)(m.Qr,{name:"Name",control:P,render:e=>{let{field:l}=e;return(0,t.jsx)(r.Z,{...l,placeholder:"Enter building name",className:"w-full mb-3 rounded-lg h-8"})}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-white font-normal text-base mb-2",children:"Building Image"}),(0,t.jsx)(c.Z,{beforeUpload:M,showUploadList:!1,children:(0,t.jsxs)(d.ZP,{className:"bg-white border-black text-black text-base",children:[(0,t.jsx)(u.G,{icon:o.cf$,className:"mr-2"}),"Click to Upload"]})})]}),Z&&(0,t.jsx)("div",{className:"relative w-full flex justify-center bg-[#F4F5F2] rounded-md p-5",children:(0,t.jsxs)("div",{className:"w-[256px] h-[150px] relative overflow-hidden rounded-md",children:[(0,t.jsx)("img",{src:Z,alt:_,className:"object-cover w-full h-full"}),(0,t.jsx)("button",{className:"absolute top-0 right-0 text-red-600 rounded-full p-2",onClick:J,children:(0,t.jsx)(u.G,{icon:o.NBC})})]})}),(0,t.jsx)("div",{className:"flex justify-center mt-6",children:(0,t.jsx)("button",{type:"button",className:"bg-purple-950 px-14 py-2 font-bold text-white rounded-full text-xl",onClick:()=>A(!0),children:"Save Changes"})})]})]}),(0,t.jsx)(j,{visible:S,onConfirm:I,onCancel:D}),(0,t.jsx)(N,{visible:G,onConfirm:T,isSuccess:z,onCancel:T})]})};k.layout=v.f;var P=k}},function(e){e.O(0,[976,634,738,453,693,536,760,161,774,888,179],function(){return e(e.s=1793)}),_N_E=e.O()}]);
//# sourceMappingURL=[id]-26751ab63d4c74e3.js.map
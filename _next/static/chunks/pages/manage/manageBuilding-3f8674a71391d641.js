(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[270],{3606:function(e,l,s){"use strict";s.d(l,{Z:function(){return c}});var t=s(1413),a=s(7294),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},n=s(2135),r=function(e,l){return a.createElement(n.Z,(0,t.Z)((0,t.Z)({},e),{},{ref:l,icon:i}))};r.displayName="CheckOutlined";var c=a.forwardRef(r)},110:function(e,l,s){"use strict";var t=s(7294),a=s(6745),i=s(4457);let n=(e,l)=>{let s=t.useContext(a.Z),n=t.useMemo(()=>{var t;let a=l||i.Z[e],n=null!==(t=null==s?void 0:s[e])&&void 0!==t?t:{};return Object.assign(Object.assign({},"function"==typeof a?a():a),n||{})},[e,l,s]),r=t.useMemo(()=>{let e=null==s?void 0:s.locale;return(null==s?void 0:s.exist)&&!e?i.Z.locale:e},[s]);return[n,r]};l.Z=n},5994:function(e,l,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage/manageBuilding",function(){return s(2038)}])},2038:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return w}});var t=s(5893),a=s(7294),i=s(1163),n=s(2453),r=s(6738),c=s(1693),d=s(8662),u=s(7732),o=s(3457),m=s(5081),x=s(9417),h=s(7814),f=s(6551),g=s(1061),b=s(161);let j=e=>{let{visible:l,onConfirm:s,isSuccess:a}=e;return(0,t.jsxs)("div",{className:"fixed inset-0 flex justify-center items-center bg-black bg-opacity-50 z-auto ".concat(l?"":"hidden"),children:[(0,t.jsx)("div",{className:"bg-purple-950 p-4 absolute top-32 rounded-full border-white border-4",children:(0,t.jsx)("img",{src:a?"/Assets/images/succeed.png":"/Assets/images/person-sad.png",alt:a?"Success":"Error",className:"w-[200px] rounded-full"})}),(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg w-2/5 h-2/5",children:(0,t.jsxs)("div",{className:"h-full",children:[(0,t.jsx)("div",{className:"h-2/3 flex flex-col justify-end",children:a?(0,t.jsxs)("div",{className:"flex flex-col items-center px-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"You're All Set!"}),(0,t.jsx)("h4",{className:"text-center",children:"Your building has been successfully added. Check the management page for more details!"})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Oh no..."}),(0,t.jsx)("h4",{className:"text-center",children:"Something went wrong. Please try again later."})]})}),(0,t.jsx)("div",{className:"h-1/3 flex items-center justify-center",children:(0,t.jsx)("button",{className:"bg-purple-950 h-[50px] w-[150px] rounded-full text-white text-lg font-semibold",onClick:s,children:a?"Okay, Great!":"Okay :("})})]})})]})},p=e=>{let{visible:l,onConfirm:s,onCancel:a}=e;return(0,t.jsxs)("div",{className:"fixed inset-0 flex justify-center items-center bg-black bg-opacity-50 z-auto ".concat(l?"":"hidden"),children:[(0,t.jsx)("div",{className:"bg-purple-950 p-4 absolute top-32 rounded-full border-white border-4",children:(0,t.jsx)("img",{src:"/Assets/images/are-you-sure.png",alt:"Are you sure?",className:"w-[200px] rounded-full"})}),(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg w-2/5 h-2/5",children:(0,t.jsxs)("div",{className:"h-full",children:[(0,t.jsx)("div",{className:"h-2/3 flex flex-col justify-end",children:(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Add Building?"}),(0,t.jsx)("h4",{className:"text-center",children:"Make sure to input the right data and requirements :)"})]})}),(0,t.jsx)("div",{className:"h-1/3 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{className:"bg-purple-950 h-[50px] w-[150px] rounded-full text-white text-lg font-semibold",onClick:s,children:"Add"}),(0,t.jsx)("button",{className:"bg-gray-200 h-[50px] w-[150px] rounded-full text-black text-lg font-semibold",onClick:a,children:"Cancel"})]})})]})})]})},N=["image/jpeg","image/png","image/gif"],v=()=>{let e=(0,i.useRouter)(),{fetchPOSTWithFormData:l}=(0,f.L)(),[s,b]=(0,a.useState)(null),[v,w]=(0,a.useState)(""),[y,k]=(0,a.useState)(!1),[C,Z]=(0,a.useState)({buildingName:"",image:null}),[P,_]=(0,a.useState)(!1),[A,B]=(0,a.useState)(!1),[S,E]=(0,a.useState)(!1),O=e=>{let l=N.includes(e.type),s=e.size<=5242880;if(!l)return n.ZP.error("File yang di upload hanya bisa dalam format JPG, JPEG, PNG"),!1;if(!s)return n.ZP.error("File yang di upload maksimal 5 MB"),!1;let t=new FileReader;return t.readAsDataURL(e),t.onload=()=>{b(t.result),w(e.name),Z({...C,image:e})},!1},F=()=>{b(null),w(""),Z({...C,image:null})},G=()=>{e.back()},M=async()=>{if(!C.buildingName||!C.image){n.ZP.error("Please provide a building name and an image");return}_(!1),k(!0);let e=new FormData;e.append("BuildingName",C.buildingName),e.append("BuildingPicture",C.image);try{await l(g.j.createBuilding,e),E(!0)}catch(e){E(!1)}finally{k(!1),B(!0)}};return(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("button",{className:"bg-white rounded-full w-10 h-10 flex items-center justify-center",onClick:G,children:(0,t.jsx)(h.G,{icon:x.A35,className:"inline"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("img",{src:"/Assets/images/add-building.png",alt:"manage",width:310,height:40,className:"mt-6 mb-6"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-white font-normal text-base mb-2",children:"Building Name"}),(0,t.jsx)(r.Z,{value:C.buildingName,onChange:e=>Z({...C,buildingName:e.target.value}),placeholder:"Enter building name",className:"w-full mb-3 rounded-lg h-8"})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("p",{className:"text-white font-normal text-base mb-2",children:"Building Image"}),(0,t.jsx)(c.Z,{beforeUpload:O,multiple:!1,showUploadList:!1,children:(0,t.jsxs)(d.ZP,{className:"bg-white border-black text-black text-base",children:[(0,t.jsx)(h.G,{icon:x.cf$,className:"mr-2"}),"Click to Upload"]})}),s&&(0,t.jsx)(u.Z,{className:"mt-4 p-4 bg-[#F4F5F2] shadow-inner flex justify-center",children:(0,t.jsxs)("div",{className:"w-72 h-fit",children:[(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(o.Z,{width:256,height:150,className:"rounded-md object-cover max-w-[256px] max-h-[150px]",src:s,alt:v})}),(0,t.jsxs)("div",{className:"flex justify-center items-center w-full",children:[(0,t.jsx)("p",{className:"font-normal text-sm",children:v}),(0,t.jsx)(d.ZP,{type:"link",onClick:F,children:(0,t.jsx)(h.G,{icon:x.NBC,className:"text-red-500"})})]})]})})]}),(0,t.jsx)("div",{className:"mt-6 flex justify-center",children:(0,t.jsx)(m.Z,{spinning:y,children:(0,t.jsx)("button",{onClick:()=>_(!0),disabled:!C.buildingName||!C.image||y,className:"bg-purple-950 px-14 py-2 font-bold text-white rounded-full text-xl",children:"Add Building"})})})]}),(0,t.jsx)(p,{visible:P,onConfirm:M,onCancel:()=>_(!1)}),(0,t.jsx)(j,{visible:A,isSuccess:S,onConfirm:()=>{B(!1),e.push("/manage")}})]})};v.layout=b.f;var w=v}},function(e){e.O(0,[976,634,738,453,123,693,732,161,774,888,179],function(){return e(e.s=5994)}),_N_E=e.O()}]);
//# sourceMappingURL=manageBuilding-3f8674a71391d641.js.map
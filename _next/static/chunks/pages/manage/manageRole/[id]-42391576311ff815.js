(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[172],{5689:function(e,l,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage/manageRole/[id]",function(){return a(693)}])},693:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return w}});var t=a(5893),s=a(7294),n=a(1163),i=a(2453),c=a(1835),o=a(6738),r=a(6985),d=a(7814),u=a(9417),m=a(3939),x=a(9734),h=a(1061),f=a(161);let g=[{value:"Promotion Team",label:"Promotion Team"},{value:"Student Service",label:"Student Service"},{value:"Student Support",label:"Student Support"},{value:"Lecturer Service",label:"Lecturer Service"},{value:"Building Management, Mechanical, and Electrical",label:"Building Management, Mechanical, and Electrical"},{value:"IT Division",label:"IT Division"},{value:"Faculty of Law",label:"Faculty of Law"},{value:"Faculty of Medicine",label:"Faculty of Medicine"},{value:"Faculty of Engineering",label:"Faculty of Engineering"},{value:"Business School",label:"Business School"}],b=[{value:"HIMTI",label:"HIMTI"},{value:"HIMMA",label:"HIMMA"},{value:"HIMPSIKO",label:"HIMPSIKO"},{value:"HIMME",label:"HIMME"},{value:"HIMSI",label:"HIMSI"},{value:"HIMKOM",label:"HIMKOM"}];var v=a(6551);let N=e=>{let{visible:l,onConfirm:a,isSuccess:s}=e;return(0,t.jsxs)("div",{className:"fixed inset-0 flex justify-center items-center bg-black bg-opacity-50 z-auto ".concat(l?"":"hidden"),children:[(0,t.jsx)("div",{className:"bg-purple-950 p-4 absolute top-32 rounded-full border-white border-4",children:(0,t.jsx)("img",{src:s?"/Assets/images/succeed.png":"/Assets/images/person-sad.png",alt:s?"Success":"Error",className:"w-[200px] rounded-full"})}),(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg w-2/5 h-2/5",children:(0,t.jsxs)("div",{className:"h-full",children:[(0,t.jsx)("div",{className:"h-2/3 flex flex-col justify-end",children:s?(0,t.jsxs)("div",{className:"flex flex-col items-center px-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"You're All Set!"}),(0,t.jsx)("h4",{className:"text-center",children:"New Role has been successfully added. Check the management page for more details!"})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Oh no..."}),(0,t.jsx)("h4",{className:"text-center",children:"Something went wrong. Please try again later."})]})}),(0,t.jsx)("div",{className:"h-1/3 flex items-center justify-center",children:(0,t.jsx)("button",{className:"bg-purple-950 h-[50px] w-[150px] rounded-full text-white text-lg font-semibold",onClick:a,children:s?"Okay, Great!":"Okay :("})})]})})]})},j=e=>{let{visible:l,onConfirm:a,onCancel:s}=e;return(0,t.jsxs)("div",{className:"fixed inset-0 flex justify-center items-center bg-black bg-opacity-50 z-auto ".concat(l?"":"hidden"),children:[(0,t.jsx)("div",{className:"bg-purple-950 p-4 absolute top-32 rounded-full border-white border-4",children:(0,t.jsx)("img",{src:"/Assets/images/are-you-sure.png",alt:"Are you sure?",className:"w-[200px] rounded-full"})}),(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg w-2/5 h-2/5",children:(0,t.jsxs)("div",{className:"h-full",children:[(0,t.jsx)("div",{className:"h-2/3 flex flex-col justify-end",children:(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Add Role?"}),(0,t.jsx)("h4",{className:"text-center",children:"Make sure to input the right data and requirements :)"})]})}),(0,t.jsx)("div",{className:"h-1/3 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{className:"bg-purple-950 h-[50px] w-[150px] rounded-full text-white text-lg font-semibold",onClick:a,children:"Add"}),(0,t.jsx)("button",{className:"bg-gray-200 h-[50px] w-[150px] rounded-full text-black text-lg font-semibold",onClick:s,children:"Cancel"})]})})]})})]})},p={token:{colorBgContainerDisabled:"#ffffff"}},S=()=>{let e=(0,n.useRouter)(),{id:l}=e.query,a=(0,m.f)(),{fetchPOST:f,fetchDELETE:S}=(0,v.L)(),{data:w}=(0,x.ZP)("".concat(h.j.getRoleDetail,"?id=").concat(l),a),{data:y}=(0,x.ZP)("".concat(h.j.getAvailableRole,"?UserId=").concat(l),a),[I,M]=(0,s.useState)(!1),[k,O]=(0,s.useState)(void 0),[C,P]=(0,s.useState)(void 0),[A,E]=(0,s.useState)(void 0),[R,H]=(0,s.useState)(!1),[Z,_]=(0,s.useState)(!1),[z,F]=(0,s.useState)(!1),[G,L]=(0,s.useState)(void 0),[T,B]=(0,s.useState)(void 0),D=()=>{e.back()},J=()=>{M(!0)},K=(e,l)=>{O(e),P(l.label),E(void 0)},U=e=>{E(e)},q=()=>{k?H(!0):i.ZP.error("Please select a role!")},X=async()=>{let e={userId:null==w?void 0:w.userId,roleId:k,organizationName:A};try{let a=await f(h.j.addNewRole,e);a?(F(!0),_(!0),(0,x.JG)("".concat(h.j.getRoleDetail,"?id=").concat(l)),(0,x.JG)("".concat(h.j.getAvailableRole,"?UserId=").concat(l))):i.ZP.error("Error: ".concat(a||"Something went wrong."))}catch(e){i.ZP.error("Error: ".concat(e||"Something went wrong while adding the role."))}finally{H(!1),M(!1),O(void 0),P(void 0),E(void 0)}},Y=(e,l)=>{L(e),B(l)};(0,s.useEffect)(()=>{G&&void 0!==T&&Q()},[G,T]);let Q=async()=>{console.log("Payload for delete request:",JSON.stringify({userId:l,roleId:G,organizationName:T||""}));try{let e=await S("".concat(h.j.deleteRole,"?UserId=").concat(l,"&RoleId=").concat(G,"&OrganizationName=").concat(T));e?(i.ZP.success("Role deleted successfully!"),(0,x.JG)("".concat(h.j.getRoleDetail,"?id=").concat(l)),(0,x.JG)("".concat(h.j.getAvailableRole,"?UserId=").concat(l)),L(void 0),B(void 0)):i.ZP.error("Failed to delete role.")}catch(e){console.error("Error deleting role:",e),i.ZP.error("Something went wrong while deleting the role.")}};return(0,t.jsxs)(c.ZP,{theme:p,children:[(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("button",{className:"bg-white rounded-full w-10 h-10 flex items-center justify-center",onClick:D,children:(0,t.jsx)(d.G,{icon:u.A35,className:"inline"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("img",{src:"/Assets/images/manage-role.png",alt:"manage",width:310,height:40,className:"mt-6 mb-6"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"mb-2 text-base text-white font-normal",children:"Full Name"}),(0,t.jsx)(o.Z,{disabled:!0,value:null==w?void 0:w.userName})]}),(0,t.jsxs)("div",{className:"flex gap-4 mt-4",children:[null==w?void 0:w.roles.map(e=>(0,t.jsx)("div",{className:"".concat("Staff"===e.roleName?"bg-red-500":"StudentOrganization"===e.roleName?"bg-blue-500":"Lecturer"===e.roleName?"bg-green-500":"Student"===e.roleName?"bg-purple-500":"LSC"===e.roleName?"bg-orange-500":"SLC"===e.roleName?"bg-pink-500":"SSO"===e.roleName?"bg-red-300":"BM"===e.roleName?"bg-lime-400":"bg-gray-400"," rounded-full"),children:(0,t.jsxs)("div",{className:"px-4 py-2 flex items-center gap-4",children:[(0,t.jsx)("p",{className:"text-base font-semibold",children:e.displayName}),(0,t.jsx)("button",{onClick:"Staff"===e.roleName||"StudentOrganization"===e.roleName?()=>Y(e.roleId,e.displayName):()=>Y(e.roleId,""),children:(0,t.jsx)(d.G,{icon:u.EOp})})]})},e.roleId)),(0,t.jsx)("div",{children:(0,t.jsxs)("button",{className:"px-4 py-2 bg-purple-950 text-white font-semibold rounded-full text-base",onClick:J,children:[(0,t.jsx)(d.G,{icon:u.r8p})," Add Role"]})})]}),I&&(0,t.jsxs)("div",{className:"mt-4 flex flex-col",children:[(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsx)("p",{className:"mb-2 text-base text-white font-normal",children:"Select Role"})}),(0,t.jsx)(r.Z,{value:k,onChange:K,className:"w-full mb-4",placeholder:"Select a role",options:null==y?void 0:y.roleAvailable.map(e=>({label:e.roleName,value:e.roleId}))}),("Staff"===C||"StudentOrganization"===C)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"mb-2 text-base text-white font-normal",children:"Staff"===C?"Office Name":"Organization Name"}),(0,t.jsx)(r.Z,{value:A,onChange:U,className:"w-full mb-4",placeholder:"Staff"===C?"Select Office":"Select Organization",options:"Staff"===C?g:b})]}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)("button",{onClick:q,className:"bg-purple-950 px-14 py-2 font-bold text-white rounded-full text-xl",children:"Add Role"})})]})]})]}),(0,t.jsx)(j,{visible:R,onConfirm:X,onCancel:()=>H(!1)}),(0,t.jsx)(N,{visible:Z,isSuccess:z,onConfirm:()=>_(!1)})]})};S.layout=f.f;var w=S}},function(e){e.O(0,[976,634,738,397,453,161,774,888,179],function(){return e(e.s=5689)}),_N_E=e.O()}]);
//# sourceMappingURL=[id]-42391576311ff815.js.map
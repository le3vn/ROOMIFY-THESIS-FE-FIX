(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[695],{3126:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/notification",function(){return o(3063)}])},3063:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return G}});var n=o(5893),l=o(7294),r=o(161),a=o(3939),i=o(9734),c=o(3299),s=o(1061),d=o(2453),u=o(7937),f=o(4184),x=o.n(f),h=o(8787),g=o(5353),m=o(3124),p=o(4747),b=o(8719),j=o(7968),N=o(5503);let y=(e,t,o)=>{let n=function(e){if("string"!=typeof e)return e;let t=e.charAt(0).toUpperCase()+e.slice(1);return t}(o);return{[`${e.componentCls}-${t}`]:{color:e[`color${o}`],background:e[`color${n}Bg`],borderColor:e[`color${n}Border`]}}},v=e=>(0,b.Z)(e,(t,o)=>{let{textColor:n,lightBorderColor:l,lightColor:r,darkColor:a}=o;return{[`${e.componentCls}-${t}`]:{color:n,background:r,borderColor:l,"&-inverse":{color:e.colorTextLightSolid,background:a,borderColor:a},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}}),C=e=>{let{paddingXXS:t,lineWidth:o,tagPaddingHorizontal:n,componentCls:l}=e,r=n-o;return{[l]:Object.assign(Object.assign({},(0,p.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:r,fontSize:e.tagFontSize,lineHeight:`${e.tagLineHeight}px`,whiteSpace:"nowrap",background:e.tagDefaultBg,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",[`&${l}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.tagDefaultColor},[`${l}-close-icon`]:{marginInlineStart:t-o,color:e.colorTextDescription,fontSize:e.tagIconSize,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${l}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${l}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:r}}),[`${l}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}};var k=(0,j.Z)("Tag",e=>{let{fontSize:t,lineHeight:o,lineWidth:n,fontSizeIcon:l}=e,r=e.fontSizeSM,a=e.colorFillQuaternary,i=e.colorText,c=(0,N.TS)(e,{tagFontSize:r,tagLineHeight:Math.round(t*o)-2*n,tagDefaultBg:a,tagDefaultColor:i,tagIconSize:l-2*n,tagPaddingHorizontal:8,tagBorderlessBg:e.colorFillTertiary});return[C(c),v(c),y(c,"success","Success"),y(c,"processing","Info"),y(c,"error","Error"),y(c,"warning","Warning")]}),w=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)0>t.indexOf(n[l])&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(o[n[l]]=e[n[l]]);return o};let $=e=>{let{prefixCls:t,className:o,checked:n,onChange:r,onClick:a}=e,i=w(e,["prefixCls","className","checked","onChange","onClick"]),{getPrefixCls:c}=l.useContext(m.E_),s=e=>{null==r||r(!n),null==a||a(e)},d=c("tag",t),[u,f]=k(d),h=x()(d,{[`${d}-checkable`]:!0,[`${d}-checkable-checked`]:n},o,f);return u(l.createElement("span",Object.assign({},i,{className:h,onClick:s})))};var S=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)0>t.indexOf(n[l])&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(o[n[l]]=e[n[l]]);return o};let O=(e,t)=>{let{prefixCls:o,className:n,rootClassName:r,style:a,children:i,icon:c,color:s,onClose:d,closeIcon:f,closable:p=!1,bordered:b=!0}=e,j=S(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable","bordered"]),{getPrefixCls:N,direction:y}=l.useContext(m.E_),[v,C]=l.useState(!0);l.useEffect(()=>{"visible"in j&&C(j.visible)},[j.visible]);let w=(0,h.o2)(s)||(0,h.yT)(s),$=Object.assign({backgroundColor:s&&!w?s:void 0},a),O=N("tag",o),[I,E]=k(O),P=x()(O,{[`${O}-${s}`]:w,[`${O}-has-color`]:s&&!w,[`${O}-hidden`]:!v,[`${O}-rtl`]:"rtl"===y,[`${O}-borderless`]:!b},n,r,E),T=e=>{e.stopPropagation(),null==d||d(e),e.defaultPrevented||C(!1)},_=l.useMemo(()=>p?f?l.createElement("span",{className:`${O}-close-icon`,onClick:T},f):l.createElement(u.Z,{className:`${O}-close-icon`,onClick:T}):null,[p,f,O,T]),A="function"==typeof j.onClick||i&&"a"===i.type,U=c||null,z=U?l.createElement(l.Fragment,null,U,l.createElement("span",null,i)):i,B=l.createElement("span",Object.assign({},j,{ref:t,className:P,style:$}),z,_);return I(A?l.createElement(g.Z,null,B):B)},I=l.forwardRef(O);I.CheckableTag=$;var E=o(3748),P=o(7828),T=o(7814),_=o(9417),A=o(6551);let U=e=>{let{visible:t,onConfirm:o,onCancel:l}=e;return(0,n.jsxs)("div",{className:"fixed inset-0 flex flex-col justify-center items-center bg-black bg-opacity-50 z-auto ".concat(t?"":"hidden"),children:[(0,n.jsx)("div",{className:"bg-purple-950 p-4 absolute top-32 rounded-full border-white border-4",children:(0,n.jsx)("img",{src:"/Assets/images/are-you-sure.png",alt:"",className:"w-[200px] rounded-full"})}),(0,n.jsx)("div",{className:"bg-white p-4 rounded-lg w-2/5 h-2/5",children:(0,n.jsxs)("div",{className:"h-full",children:[(0,n.jsx)("div",{className:"h-2/3 flex flex-col justify-end",children:(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"Delete All Notification ?"}),(0,n.jsx)("h4",{className:"text-center",children:"This action can't be undone. Your notifications will be gone. Permanently."})]})}),(0,n.jsx)("div",{className:"h-1/3 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)("button",{className:"bg-purple-950 h-[50px] w-[150px] rounded-full text-white text-lg font-semibold",onClick:o,children:"Submit"}),(0,n.jsx)("button",{className:"bg-gray-200 h-[50px] w-[150px] rounded-full text-black text-lg font-semibold",onClick:l,children:"Cancel"})]})})]})})]})},z=e=>{let{visible:t,onConfirm:o,isSuccess:l,onCancel:r}=e;return(0,n.jsxs)("div",{className:"fixed inset-0 flex flex-col justify-center items-center bg-black bg-opacity-50 z-auto ".concat(t?"":"hidden"),children:[(0,n.jsx)("div",{className:"bg-purple-950 p-4 absolute top-32 rounded-full border-white border-4",children:(0,n.jsx)("img",{src:l?"/Assets/images/succeed.png":"/Assets/images/person-sad.png",alt:"",className:"w-[200px] rounded-full"})}),(0,n.jsx)("div",{className:"bg-white p-4 rounded-lg w-2/5 h-2/5",children:(0,n.jsxs)("div",{className:"h-full",children:[(0,n.jsx)("div",{className:"h-2/3 flex flex-col justify-end",children:l?(0,n.jsxs)("div",{className:"flex flex-col items-center px-8",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"You're All Set !"}),(0,n.jsx)("h4",{className:"text-center",children:"Your notifications are deleted."})]}):(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"Oh no..."}),(0,n.jsx)("h4",{className:"text-center",children:"Something just happened. Try again later."})]})}),(0,n.jsx)("div",{className:"h-1/3 flex items-center justify-center",children:(0,n.jsx)("div",{className:"flex gap-4",children:(0,n.jsx)("button",{className:"bg-purple-950 h-[50px] w-[150px] rounded-full text-white text-lg font-semibold",onClick:l?o:r,children:l?"Okay, Great!":"Okay :("})})})]})})]})},B=()=>{let{data:e}=(0,c.useSession)(),t=null==e?void 0:e.user,o=null==t?void 0:t.id,r=(0,a.f)(),{fetchPUT:u,fetchDELETE:f}=(0,A.L)(),{data:x}=(0,i.ZP)("".concat(s.j.getNotification,"?UserId=").concat(o),r),[h,g]=(0,l.useState)([]),[m,p]=(0,l.useState)(!1),[b,j]=(0,l.useState)(!1),[N,y]=(0,l.useState)(!1),v=async e=>{await u(s.j.readNotification,{notificationId:e}),(0,i.JG)("".concat(s.j.getNotification,"?UserId=").concat(o)),(0,i.JG)("".concat(s.j.getNotificationUnread,"?UserId=").concat(o))},C=async e=>{let t=await f("".concat(s.j.deleteNotification,"?NotificationId=").concat(e));t.data&&((0,i.JG)("".concat(s.j.getNotification,"?UserId=").concat(o)),(0,i.JG)("".concat(s.j.getNotificationUnread,"?UserId=").concat(o)))},k=()=>{h.length>0?p(!0):d.ZP.error("Please select at least one notification to delete.")},w=async()=>{y(!1);try{for(let e=0;e<h.length;e++){let t=h[e],o=await f("".concat(s.j.deleteNotification,"?NotificationId=").concat(t));if(!o.data)throw Error("Failed to delete notification")}y(!0),j(!0),(0,i.JG)("".concat(s.j.getNotification,"?UserId=").concat(o)),(0,i.JG)("".concat(s.j.getNotificationUnread,"?UserId=").concat(o))}catch(e){console.error("Error deleting notifications:",e)}finally{p(!1)}},$=()=>{p(!1)},S=()=>{j(!1)},O=()=>{j(!1)},B=[{title:"No",dataIndex:"no",key:"no",render:(e,t,o)=>o+1},{title:"Notification",dataIndex:"message",key:"notificationId",render:(e,t)=>(0,n.jsx)("div",{className:"flex items-center",onClick:()=>v(t.notificationId),children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("p",{className:"text-base font-bold mr-2",children:t.subject}),(0,n.jsx)("span",{children:null===t.readAt&&(0,n.jsx)(I,{color:"red",className:"mr-2",children:"New"})})]}),(0,n.jsx)("p",{children:e}),(0,n.jsxs)("p",{className:"text-xs text-gray-500",children:[t.createdAt," - ",t.createdBy]})]})})},{title:"Actions",key:"actions",render:(e,t)=>(0,n.jsx)(E.Z,{size:"middle",children:(0,n.jsx)("button",{onClick:()=>C(t.notificationId),children:(0,n.jsx)(T.G,{icon:_.$aW,className:"text-red-500"})})})}];return(0,n.jsxs)("div",{className:"mt-3 h-[650px]",children:[(0,n.jsx)("img",{src:"/Assets/images/notification.png",alt:"Ongoing",width:310,height:40,className:"mt-16"}),(0,n.jsx)("div",{className:"flex justify-end mt-4 mb-6",children:(0,n.jsx)("button",{onClick:k,className:"bg-red-500 w-10 h-10 rounded-xl",children:(0,n.jsx)(T.G,{icon:_.$aW,className:"text-white"})})}),(0,n.jsx)(P.Z,{rowSelection:{selectedRowKeys:h,onChange:e=>{g(e)}},columns:B,dataSource:null==x?void 0:x.notifications,rowKey:"notificationId",pagination:!1,scroll:{y:700}}),(0,n.jsx)(U,{visible:m,onConfirm:w,onCancel:$}),(0,n.jsx)(z,{visible:b,onConfirm:S,onCancel:O,isSuccess:N})]})};B.layout=r.f;var G=B}},function(e){e.O(0,[976,634,738,397,453,123,828,161,774,888,179],function(){return e(e.s=3126)}),_N_E=e.O()}]);
//# sourceMappingURL=notification-9d9851ebf157a3fb.js.map
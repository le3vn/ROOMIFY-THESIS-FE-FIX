(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[585],{6216:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboardApprover",function(){return r(3207)}])},7286:function(e,t,r){"use strict";var n=r(5893);r(7294);var o=r(5675),l=r.n(o);let u=()=>(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)(l(),{src:"/Assets/images/font-title-master.png",alt:"Title Master",width:720,height:100}),(0,n.jsxs)("div",{className:"text-center mt-2",children:[(0,n.jsx)("p",{className:"text-white text-sm",children:"Unlock the door to convenience with Roomify. : Where booking a room becomes"}),(0,n.jsx)("p",{className:"text-white text-sm",children:"as effortless as turning the key."})]})]});t.Z=u},5182:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientHookInServerComponentError=function(e){},(0,r(2648).Z)(r(7294)),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1414:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSearchParams=function(){u.clientHookInServerComponentError("useSearchParams");let e=n.useContext(l.SearchParamsContext),t=n.useMemo(()=>e?new p(e):null,[e]);return t},t.usePathname=function(){return u.clientHookInServerComponentError("usePathname"),n.useContext(l.PathnameContext)},Object.defineProperty(t,"ServerInsertedHTMLContext",{enumerable:!0,get:function(){return a.ServerInsertedHTMLContext}}),Object.defineProperty(t,"useServerInsertedHTML",{enumerable:!0,get:function(){return a.useServerInsertedHTML}}),t.useRouter=function(){u.clientHookInServerComponentError("useRouter");let e=n.useContext(o.AppRouterContext);if(null===e)throw Error("invariant expected app router to be mounted");return e},t.useParams=function(){u.clientHookInServerComponentError("useParams");let e=n.useContext(o.GlobalLayoutRouterContext);return e?function e(t){var r;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t[1],l=null!=(r=o.children)?r:Object.values(o)[0];if(!l)return n;let u=l[0],s=Array.isArray(u),a=s?u[1]:u;return!a||a.startsWith("__PAGE__")?n:(s&&(n[u[0]]=u[1]),e(l,n))}(e.tree):null},t.useSelectedLayoutSegments=h,t.useSelectedLayoutSegment=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"children";u.clientHookInServerComponentError("useSelectedLayoutSegment");let t=h(e);return 0===t.length?null:t[0]},Object.defineProperty(t,"redirect",{enumerable:!0,get:function(){return i.redirect}}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return c.notFound}});var n=r(7294),o=r(4224),l=r(8463),u=r(5182),s=r(2526),a=r(3014),i=r(8781),c=r(8147);let d=Symbol("internal for urlsearchparams readonly");function f(){return Error("ReadonlyURLSearchParams cannot be modified")}class p{[Symbol.iterator](){return this[d][Symbol.iterator]()}append(){throw f()}delete(){throw f()}set(){throw f()}sort(){throw f()}constructor(e){this[d]=e,this.entries=e.entries.bind(e),this.forEach=e.forEach.bind(e),this.get=e.get.bind(e),this.getAll=e.getAll.bind(e),this.has=e.has.bind(e),this.keys=e.keys.bind(e),this.values=e.values.bind(e),this.toString=e.toString.bind(e)}}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"children";u.clientHookInServerComponentError("useSelectedLayoutSegments");let{tree:t}=n.useContext(o.LayoutRouterContext);return function e(t,r){let n,o=!(arguments.length>2)||void 0===arguments[2]||arguments[2],l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(o)n=t[1][r];else{var u;let e=t[1];n=null!=(u=e.children)?u:Object.values(e)[0]}if(!n)return l;let a=n[0],i=s.getSegmentValue(a);return!i||i.startsWith("__PAGE__")?l:(l.push(i),e(n,r,!1,l))}(t,e)}t.ReadonlyURLSearchParams=p,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8147:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notFound=function(){let e=Error(r);throw e.digest=r,e},t.isNotFoundError=function(e){return(null==e?void 0:e.digest)===r};let r="NEXT_NOT_FOUND";("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8781:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.redirect=function(e){let t=Error(r);throw t.digest="".concat(r,";").concat(e),t},t.isRedirectError=n,t.getURLFromRedirectError=function(e){return n(e)?e.digest.slice(r.length+1):null};let r="NEXT_REDIRECT";function n(e){return"string"==typeof(null==e?void 0:e.digest)&&e.digest.startsWith(r+";")&&e.digest.length>r.length+1}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2526:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSegmentValue=function(e){return Array.isArray(e)?e[1]:e},("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3014:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useServerInsertedHTML=function(e){let t=n.useContext(o);t&&t(e)},t.ServerInsertedHTMLContext=void 0;var n=(0,r(1598).Z)(r(7294));let o=n.default.createContext(null);t.ServerInsertedHTMLContext=o},3207:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return j}});var n=r(5893),o=r(7294),l=r(161),u=r(6738),s=r(7814),a=r(9417),i=r(4697),c=r(7286);let d=e=>{let{isOpen:t,onClose:r,onSelectOption:o,selected:l}=e;if(!t)return null;let u=e=>{l===e?o(""):o(e)};return(0,n.jsx)("div",{className:"fixed inset-0 flex justify-end bg-black bg-opacity-30 z-50",children:(0,n.jsx)("div",{className:"absolute right-12 top-56",children:(0,n.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-lg w-[450px] h-32 left-24 flex flex-col justify-between",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Sort Order"}),(0,n.jsx)("button",{className:"bg-gray-200 w-7 h-7 rounded-full",onClick:r,children:(0,n.jsx)(s.G,{icon:a.EOp,className:"w-3 h-3"})})]}),(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)("button",{className:"".concat("Desc"===l?"bg-[#EB8317]":"bg-purple-950"," text-white font-semibold px-4 rounded-full w-[200px] h-[40px]"),onClick:()=>u("Desc"),children:"Latest to Earliest"}),(0,n.jsx)("button",{className:"".concat("Asc"===l?"bg-[#EB8317]":"bg-purple-950"," font-semibold text-white px-4 rounded-full w-[200px] h-[40px]"),onClick:()=>u("Asc"),children:"Earliest to Latest"})]})]})})})};var f=r(9734),p=r(1061),h=r(9332),m=r(3939),x=r(3299);let v=e=>{let{search:t,sort:r}=e,l=(0,h.useSearchParams)(),u=(0,m.f)(),s=(0,h.useRouter)(),{data:a}=(0,x.useSession)(),i=null==a?void 0:a.user,c=null==i?void 0:i.id;console.log(null==i?void 0:i.id),(0,o.useEffect)(()=>{let e=new URLSearchParams(l.toString());t?e.set("Search",t):e.delete("Search"),r?e.set("SortOrder",r):e.delete("SortOrder"),s.push("?".concat(e.toString()))},[t,r]);let{data:d}=(0,f.ZP)("".concat(p.j.getApproverView,"?ApproverId=").concat(null==i?void 0:i.id).concat(t?"&Search=".concat(t):"").concat(r?"&SortOrder=".concat(r):""),u),v=e=>{s.push("/approverDetail/".concat(e))};return(0,n.jsx)("div",{className:"grid grid-cols-3 gap-5 h-[530px] overflow-y-auto",children:null==d?void 0:d.approverViewModel.map(e=>{let t=e.userRole;return console.log(t),(0,n.jsxs)("div",{className:"bg-white rounded-lg p-4 h-[510px] overflow-y-auto",children:[(0,n.jsx)("div",{className:"relative mb-4",children:(0,n.jsx)("img",{src:e.roomMinioUrl,alt:"",className:"rounded-lg w-full h-48 object-cover"})}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold max-w-[170px] break-words",children:e.bookingDescription}),(0,n.jsx)("button",{className:"bg-purple-950 min-w-[120px] min-h-[35px] max-h-[35px] rounded-full text-white",onClick:()=>v(e.bookingId),children:"Detail"})]}),(0,n.jsx)("div",{children:(0,n.jsx)("h3",{className:"text-base mb-1",children:e.roomName})}),(0,n.jsxs)("div",{className:"mb-1",children:[(0,n.jsx)("p",{className:"text-xs mb-1",children:"Submitted by :"}),"Student"==t||"Lecturer"==t?(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("img",{src:e.bookerMinioUrl,alt:"",className:"w-8 h-8 rounded-full border-2 border-purple-950"}),(0,n.jsxs)("p",{children:[e.bookingInstitutionalId," - ",e.name]})]}):(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)("img",{src:e.bookerMinioUrl,alt:"",className:"w-8 h-8 rounded-full border-2 border-purple-950"}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{children:[e.bookingInstitutionalId," - ",e.bookingOrganizationName]}),(0,n.jsx)("p",{children:e.name})]})]})]}),(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-xs mb-1",children:"Approvals from :"})}),e.approverHistory.map(e=>(0,n.jsxs)("div",{className:"relative flex items-center gap-2 group",children:[(0,n.jsx)("img",{src:e.approverMinioUrl,alt:"",className:"rounded-full my-1 border-2 ".concat(e.approverUserId==c?"w-10 h-10 opacity-100":"w-8 h-8 opacity-50"," ").concat(1===e.statusId?"border-yellow-600":2===e.statusId?"border-green-600":"border-red-600")}),(0,n.jsx)("p",{className:"".concat(e.approverUserId==c?"opacity-100":"opacity-50"),children:e.approverUserName}),(0,n.jsxs)("div",{className:"absolute left-0 bottom-12 hidden group-hover:block bg-gray-800 text-white text-sm p-2 rounded-md shadow-lg",children:[(0,n.jsxs)("p",{children:["Status: ",e.statusName]}),(0,n.jsxs)("p",{children:[4===e.statusId?"Cancelled at :":3===e.statusId?"Rejected at:":"Approved at:"," ","0001-01-01T00:00:00"===e.approvedAt?"N/A":e.approvedAt]})]})]},e.approverUserId))]},e.bookingId)})})};var b=r(1163);let g=()=>{var e;let[t,r]=(0,o.useState)(""),[l]=(0,i.Nr)(t,1e3),[f,p]=(0,o.useState)(!1),[h,m]=(0,o.useState)(""),{data:g}=(0,x.useSession)(),j=null==g?void 0:g.user,y=null==j?void 0:null===(e=j.role)||void 0===e?void 0:e[0],w=(0,b.useRouter)();console.log(y);let S=(0,o.useCallback)(()=>{p(!0)},[]),N=(0,o.useCallback)(()=>{p(!1)},[]),_=(0,o.useCallback)(e=>{m(e),N()},[N]);return(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)(c.Z,{}),(0,n.jsxs)("div",{className:"mt-8 w-full flex justify-center gap-4",children:[(0,n.jsx)(u.Z,{placeholder:"Search",prefix:(0,n.jsx)(s.G,{icon:a.Y$T}),className:"w-6/7 rounded-2xl mb-8 h-[30px]",value:t,onChange:e=>r(e.target.value)}),(0,n.jsxs)("button",{className:"bg-white w-[200px] h-[30px] rounded-full",onClick:S,children:[(0,n.jsx)(s.G,{icon:a.cRF,className:"mr-2"}),"Filter"]}),("LSC"===y||"BM"===y||"SLC"===y)&&(0,n.jsx)("button",{className:"bg-[#EB8317] border-4 border-[#d68530] font-semibold text-white w-[200px] h-[30px] rounded-full",onClick:()=>w.push("/checkIn"),children:"Check-In"})]}),(0,n.jsx)(d,{isOpen:f,onClose:N,onSelectOption:_,selected:h}),(0,n.jsx)("div",{className:"h-[530px] w-full overflow-y-auto",children:(0,n.jsx)(v,{search:l,sort:h})})]})};g.layout=l.f;var j=g},9332:function(e,t,r){e.exports=r(1414)},4697:function(e,t,r){"use strict";r.d(t,{Nr:function(){return l}});var n=r(7294);function o(e,t){return e===t}function l(e,t,r){var l=r&&r.equalityFn||o,u=(0,n.useRef)(e),s=(0,n.useState)({})[1],a=function(e,t,r){var o=this,l=(0,n.useRef)(null),u=(0,n.useRef)(0),s=(0,n.useRef)(null),a=(0,n.useRef)([]),i=(0,n.useRef)(),c=(0,n.useRef)(),d=(0,n.useRef)(e),f=(0,n.useRef)(!0);d.current=e;var p="undefined"!=typeof window,h=!t&&0!==t&&p;if("function"!=typeof e)throw TypeError("Expected a function");t=+t||0;var m=!!(r=r||{}).leading,x=!("trailing"in r)||!!r.trailing,v="maxWait"in r,b="debounceOnServer"in r&&!!r.debounceOnServer,g=v?Math.max(+r.maxWait||0,t):null;return(0,n.useEffect)(function(){return f.current=!0,function(){f.current=!1}},[]),(0,n.useMemo)(function(){var e=function(e){var t=a.current,r=i.current;return a.current=i.current=null,u.current=e,c.current=d.current.apply(r,t)},r=function(e,t){h&&cancelAnimationFrame(s.current),s.current=h?requestAnimationFrame(e):setTimeout(e,t)},n=function(e){if(!f.current)return!1;var r=e-l.current;return!l.current||r>=t||r<0||v&&e-u.current>=g},j=function(t){return s.current=null,x&&a.current?e(t):(a.current=i.current=null,c.current)},y=function e(){var o=Date.now();if(n(o))return j(o);if(f.current){var s=t-(o-l.current);r(e,v?Math.min(s,g-(o-u.current)):s)}},w=function(){if(p||b){var d=Date.now(),h=n(d);if(a.current=[].slice.call(arguments),i.current=o,l.current=d,h){if(!s.current&&f.current)return u.current=l.current,r(y,t),m?e(l.current):c.current;if(v)return r(y,t),e(l.current)}return s.current||r(y,t),c.current}};return w.cancel=function(){s.current&&(h?cancelAnimationFrame(s.current):clearTimeout(s.current)),u.current=0,a.current=l.current=i.current=s.current=null},w.isPending=function(){return!!s.current},w.flush=function(){return s.current?j(Date.now()):c.current},w},[m,v,t,g,x,h,p,b])}((0,n.useCallback)(function(e){u.current=e,s({})},[s]),t,r),i=(0,n.useRef)(e);return l(i.current,e)||(a(e),i.current=e),[u.current,a]}}},function(e){e.O(0,[976,634,738,675,161,774,888,179],function(){return e(e.s=6216)}),_N_E=e.O()}]);
//# sourceMappingURL=dashboardApprover-e2cedb9aeafdec64.js.map